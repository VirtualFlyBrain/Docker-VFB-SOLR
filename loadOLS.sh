#!/bin/bash

init-solr-home

solr start -p 8983 -Dsolr.solr.home=/opt/VFB/OLS/ols-solr/src/main/solr-5-config/ -Dsolr.data.dir=/opt/VFB/OLS/ols-solr/src/main/solr-5-config

cd ${WORKSPACE}/
wget https://github.com/VirtualFlyBrain/VFB_owl/raw/${VFB_OWL_VERSION}/src/owl/vfb.owl.gz
gzip -d vfb.owl.gz

curl -sSf http://localhost:8983/solr

curl -sSf http://localhost:8983/solr/ontology

curl -sSf http://localhost:8983/solr/ontology/select

java -Xmx2g -jar -Dspring.profiles.active=vfb ${WORKSPACE}/OLS/ols-apps/ols-solr-app/target/ols-solr-app.jar

# Manually add DataSets:
curl -X POST -H 'Content-Type: application/json' 'http://localhost:8983/solr/ontology/update' --data-binary '[{"id":"vfb:individual:http://virualflybrain.org/data/Yu2013","iri":"http://virualflybrain.org/data/Yu2013","short_form":"Yu2013","shortform_autosuggest":["Yu2013","Yu2013"],"obo_id":"Yu2013","label":"Yu2013","label_autosuggest":"Yu2013","label_autosuggest_ws":"Yu2013","label_autosuggest_e":"Yu2013","autosuggest":["Yu2013"],"autosuggest_e":["Yu2013"],"description":["Yu2013 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Ito2013","iri":"http://virualflybrain.org/data/Ito2013","short_form":"Ito2013","shortform_autosuggest":["Ito2013","Ito2013"],"obo_id":"Ito2013","label":"Ito2013","label_autosuggest":"Ito2013","label_autosuggest_ws":"Ito2013","label_autosuggest_e":"Ito2013","autosuggest":["Ito2013"],"autosuggest_e":["Ito2013"],"description":["Ito2013 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Cachero2010","iri":"http://virualflybrain.org/data/Cachero2010","short_form":"Cachero2010","shortform_autosuggest":["Cachero2010","Cachero2010"],"obo_id":"Cachero2010","label":"Cachero2010","label_autosuggest":"Cachero2010","label_autosuggest_ws":"Cachero2010","label_autosuggest_e":"Cachero2010","autosuggest":["Cachero2010"],"autosuggest_e":["Cachero2010"],"description":["Cachero2010 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Chiang2010","iri":"http://virualflybrain.org/data/Chiang2010","short_form":"Chiang2010","shortform_autosuggest":["Chiang2010","Chiang2010"],"obo_id":"Chiang2010","label":"Chiang2010","label_autosuggest":"Chiang2010","label_autosuggest_ws":"Chiang2010","label_autosuggest_e":"Chiang2010","autosuggest":["Chiang2010"],"autosuggest_e":["Chiang2010"],"description":["Chiang2010 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Knowles-Barley2010","iri":"http://virualflybrain.org/data/Knowles-Barley2010","short_form":"Knowles_Barley2010","shortform_autosuggest":["Knowles_Barley2010","Knowles-Barley2010"],"obo_id":"Knowles_Barley2010","label":"Knowles_Barley2010","label_autosuggest":"Knowles_Barley2010","label_autosuggest_ws":"Knowles_Barley2010","label_autosuggest_e":"Knowles_Barley2010","autosuggest":["Knowles_Barley2010"],"autosuggest_e":["Knowles_Barley2010"],"description":["Knowles-Barley2010 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Jenett2012","iri":"http://virualflybrain.org/data/Jenett2012","short_form":"Jenett2012","shortform_autosuggest":["Jenett2012","Jenett2012"],"obo_id":"Jenett2012","label":"Jenett2012","label_autosuggest":"Jenett2012","label_autosuggest_ws":"Jenett2012","label_autosuggest_e":"Jenett2012","autosuggest":["Jenett2012"],"autosuggest_e":["Jenett2012"],"description":["Jenett2012 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/CostaJefferis_v3","iri":"http://virualflybrain.org/data/CostaJefferis_v3","short_form":"CostaJefferis_v3","shortform_autosuggest":["CostaJefferis_v3","CostaJefferis_v3"],"obo_id":"CostaJefferis_v3","label":"CostaJefferis_v3","label_autosuggest":"CostaJefferis_v3","label_autosuggest_ws":"CostaJefferis_v3","label_autosuggest_e":"CostaJefferis_v3","autosuggest":["CostaJefferis_v3"],"autosuggest_e":["CostaJefferis_v3"],"description":["CostaJefferis_v3 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Aso2014","iri":"http://virualflybrain.org/data/Aso2014","short_form":"Aso2014","shortform_autosuggest":["Aso2014","Aso2014"],"obo_id":"Aso2014","label":"Aso2014","label_autosuggest":"Aso2014","label_autosuggest_ws":"Aso2014","label_autosuggest_e":"Aso2014","autosuggest":["Aso2014"],"autosuggest_e":["Aso2014"],"description":["Aso2014 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Dickson_VT","iri":"http://virualflybrain.org/data/Dickson_VT","short_form":"Dickson_VT","shortform_autosuggest":["Dickson_VT","Dickson_VT"],"obo_id":"Dickson_VT","label":"Dickson_VT","label_autosuggest":"Dickson_VT","label_autosuggest_ws":"Dickson_VT","label_autosuggest_e":"Dickson_VT","autosuggest":["Dickson_VT"],"autosuggest_e":["Dickson_VT"],"description":["Dickson_VT DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/JenettShinomya_BrainName","iri":"http://virualflybrain.org/data/JenettShinomya_BrainName","short_form":"JenettShinomya_BrainName","shortform_autosuggest":["JenettShinomya_BrainName","JenettShinomya_BrainName"],"obo_id":"JenettShinomya_BrainName","label":"JenettShinomya_BrainName","label_autosuggest":"JenettShinomya_BrainName","label_autosuggest_ws":"JenettShinomya_BrainName","label_autosuggest_e":"JenettShinomya_BrainName","autosuggest":["JenettShinomya_BrainName"],"autosuggest_e":["JenettShinomya_BrainName"],"description":["JenettShinomya_BrainName DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Kohl2013","iri":"http://virualflybrain.org/data/Kohl2013","short_form":"Kohl2013","shortform_autosuggest":["Kohl2013","Kohl2013"],"obo_id":"Kohl2013","label":"Kohl2013","label_autosuggest":"Kohl2013","label_autosuggest_ws":"Kohl2013","label_autosuggest_e":"Kohl2013","autosuggest":["Kohl2013"],"autosuggest_e":["Kohl2013"],"description":["Kohl2013 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Matsuo2016","iri":"http://virualflybrain.org/data/Matsuo2016","short_form":"Matsuo2016","shortform_autosuggest":["Matsuo2016","Matsuo2016"],"obo_id":"Matsuo2016","label":"Matsuo2016","label_autosuggest":"Matsuo2016","label_autosuggest_ws":"Matsuo2016","label_autosuggest_e":"Matsuo2016","autosuggest":["Matsuo2016"],"autosuggest_e":["Matsuo2016"],"description":["Matsuo2016 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/BrainName_Ito_half_brain","iri":"http://virualflybrain.org/data/BrainName_Ito_half_brain","short_form":"BrainName_Ito_half_brain","shortform_autosuggest":["BrainName_Ito_half_brain","BrainName_Ito_half_brain"],"obo_id":"BrainName_Ito_half_brain","label":"BrainName_Ito_half_brain","label_autosuggest":"BrainName_Ito_half_brain","label_autosuggest_ws":"BrainName_Ito_half_brain","label_autosuggest_e":"BrainName_Ito_half_brain","autosuggest":["BrainName_Ito_half_brain"],"autosuggest_e":["BrainName_Ito_half_brain"],"description":["BrainName_Ito_half_brain DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/CostaJefferis_v2","iri":"http://virualflybrain.org/data/CostaJefferis_v2","short_form":"CostaJefferis_v2","shortform_autosuggest":["CostaJefferis_v2","CostaJefferis_v2"],"obo_id":"CostaJefferis_v2","label":"CostaJefferis_v2","label_autosuggest":"CostaJefferis_v2","label_autosuggest_ws":"CostaJefferis_v2","label_autosuggest_e":"CostaJefferis_v2","autosuggest":["CostaJefferis_v2"],"autosuggest_e":["CostaJefferis_v2"],"description":["CostaJefferis_v2 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Berck2016","iri":"http://virualflybrain.org/data/Berck2016","short_form":"Berck2016","shortform_autosuggest":["Berck2016","Berck2016"],"obo_id":"Berck2016","label":"Berck2016","label_autosuggest":"Berck2016","label_autosuggest_ws":"Berck2016","label_autosuggest_e":"Berck2016","autosuggest":["Berck2016"],"autosuggest_e":["Berck2016"],"description":["Berck2016 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/Ohyama2015","iri":"http://virualflybrain.org/data/Ohyama2015","short_form":"Ohyama2015","shortform_autosuggest":["Ohyama2015","Ohyama2015"],"obo_id":"Ohyama2015","label":"Ohyama2015","label_autosuggest":"Ohyama2015","label_autosuggest_ws":"Ohyama2015","label_autosuggest_e":"Ohyama2015","autosuggest":["Ohyama2015"],"autosuggest_e":["Ohyama2015"],"description":["Ohyama2015 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true},{"id":"vfb:individual:http://virualflybrain.org/data/WoodHartenstein2018","iri":"http://virualflybrain.org/data/WoodHartenstein2018","short_form":"WoodHartenstein2018","shortform_autosuggest":["WoodHartenstein2018","WoodHartenstein2018"],"obo_id":"WoodHartenstein2018","label":"WoodHartenstein2018","label_autosuggest":"WoodHartenstein2018","label_autosuggest_ws":"WoodHartenstein2018","label_autosuggest_e":"WoodHartenstein2018","autosuggest":["WoodHartenstein2018"],"autosuggest_e":["WoodHartenstein2018"],"description":["WoodHartenstein2018 DataSet"],"ontology_name":"vfb","ontology_title":"Virtual Fly Brain Knowledge Base","ontology_prefix":"VFB","ontology_iri":"http://purl.obolibrary.org/obo/fbbt/vfb/vfb.owl","type":"individual","is_defining_ontology":false,"has_children":false,"is_root":true}]'

solr stop

solr-foreground -Dsolr.solr.home=/opt/VFB/OLS/ols-solr/src/main/solr-5-config/ -Dsolr.data.dir=/opt/VFB/OLS/ols-solr/src/main/solr-5-config
